<!DOCTYPE html>
<html lang="en-us">

<head>
<meta charset="utf-8">
<title>賓客桌卡</title>
<meta name="viewport"
	content="width=device-width, initial-scale=1, maximum-scale=1">

<!-- theme meta -->
<meta name="theme-name" content="dot" />

<!-- ** CSS Plugins Needed for the Project ** -->

<!-- Bootstrap -->
<link rel="stylesheet" href="plugins/bootstrap/bootstrap.min.css">
<!-- themefy-icon -->
<link rel="stylesheet" href="plugins/themify-icons/themify-icons.css">
<!--Favicon-->
<!-- <link rel="icon" href="images/favicon.png" type="image/x-icon"> -->
<link rel="icon" href="images/favicon.ico" type="image/x-icon">
<!-- fonts -->
<link
	href="https://fonts.googleapis.com/css?family=Lato:300,400,700&display=swap"
	rel="stylesheet">
<!-- Main Stylesheet -->
<link href="assets/style.css" rel="stylesheet" media="screen" />

<!-- 引用自定義CSS文件 -->
<link rel="stylesheet" href="countdown/countdown.css">
<link rel="stylesheet" href="index.css">

</head>

<body>

	<!-- 婚紗照 -->
	<div class="album">
		<div class="content-center">
			<a target="_blank" href="https://myalbum.com/album/UBhSG6NhUGQpKz/">
				<img width="460" height="345" style="width: 100%; height: auto;"
				src="https://myalbum.com/album/UBhSG6NhUGQpKz/cover?size=1000"
				border="0" /> <!-- 半透明方框 -->
				<div class="overlay-text">完整版婚紗照</div>
			</a>
		</div>
	</div>

	<!-- 計時器顯示區域 -->
	<div class="countdown">
		<div class="text-center" width="100%">
			<!-- 設置計時器的字體和顯示格式 -->
			<div id="timer" align=center
				style="font-family: Arial, Helvetica; font-size: 10vw; margin-top: 4vw;">00:00:00</div>
		</div>
	</div>

	<hr>
	<!-- 上傳照片 -->
<section>
    <div class="container">
        <div class="section px-3 bg-white shadow text-center overlay-upload">
            <h2>上傳照片到Dropbox</h2>
            <h5>檔案如果太大</h5>
            <h5>上傳時間會比較久，請耐心等候</h5>
            <form id="uploadForm">
                <!-- Bootstrap 4.1.1 custom file input -->
                <div class="form-group">
                    <div class="custom-file">
                        <input type="file" class="form-control-file" id="fileInput" name="file" multiple required style="font-size: 1.6rem;">
                    </div>
                </div>
                <!-- Bootstrap 4.1.1 styled button -->
                <button type="submit" class="btn btn-dark" style="font-size: 1.2rem;">上傳</button>
            </form>
        </div>
    </div>

    <!-- Loading overlay with loader animation -->
    <div id="loadingOverlay">
        <div class="loader"></div>
        <div style="color: white; font-size: 2rem; margin-top: 20px;">上傳中，請稍候...</div>
    </div>
</section>

<script>
    document.getElementById('uploadForm').addEventListener('submit', function(event) {
        event.preventDefault();

        const files = document.getElementById('fileInput').files;
        if (files.length === 0) {
            alert('請選擇至少一個檔案');
            return;
        }

        // 顯示 loading 畫面
        document.getElementById('loadingOverlay').style.display = 'flex';

        const accessToken = 'YOUR_ACCESS_TOKEN';  // 替換為你的Access Token
        const dbx = new Dropbox.Dropbox({ accessToken: accessToken });

        const uploadPromises = [];

        for (let i = 0; i < files.length; i++) {
            const file = files[i];
            const uploadPromise = dbx.filesUpload({ path: '/上傳喜宴照片/' + file.name, contents: file });
            uploadPromises.push(uploadPromise);
        }

        Promise.all(uploadPromises)
            .then(function(responses) {
                alert('所有檔案已成功上傳！');
                // 隱藏 loading 畫面
                document.getElementById('loadingOverlay').style.display = 'none';
            })
            .catch(function(error) {
                console.error(error);
                alert('上傳失敗：' + error.message);
                // 隱藏 loading 畫面
                document.getElementById('loadingOverlay').style.display = 'none';
            });
    });
</script>



	<!-- footer -->
	<footer class="section pb-4">
		<div class="content text-center">
			<p class="mb-md-0 mb-4">made by jun</p>
		</div>
	</footer>
	<!-- /footer -->

	<!-- ** JS Plugins Needed for the Project ** -->
	<script src="https://unpkg.com/dropbox/dist/Dropbox-sdk.min.js"></script>
	<!-- jquiry -->
	<script src="plugins/jquery/jquery-1.12.4.js"></script>
	<!-- Bootstrap JS -->
	<script src="plugins/bootstrap/bootstrap.min.js"></script>
	<!-- match-height JS -->
	<script src="plugins/match-height/jquery.matchHeight-min.js"></script>
	<!-- Main Script -->
	<script src="assets/script.js"></script>
	<!-- 引用自定義JavaScript文件 -->
	<script src="countdown/countdown.js"></script>
</body>

</html>
